<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order History - FoodExpress</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <a href="../index.php" class="logo">
                <i class="fas fa-utensils"></i>
                <span>FoodExpress</span>
            </a>
            
            <div class="nav-links">
                <a href="../index.php"><i class="fas fa-home"></i> Home</a>
                <a href="menu.html"><i class="fas fa-utensils"></i> Menu</a>
                <a href="cart.html"><i class="fas fa-shopping-cart"></i> Cart <span id="cart-count" class="cart-count">0</span></a>
                <a href="order-history.html" class="active"><i class="fas fa-history"></i> Orders</a>
                <div class="user-menu" id="user-menu" style="display: none;">
                    <div class="user-dropdown">
                        <button class="user-btn">
                            <i class="fas fa-user-circle"></i>
                            <span id="username-display"></span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="#"><i class="fas fa-user"></i> Profile</a>
                            <a href="order-history.html"><i class="fas fa-history"></i> Order History</a>
                            <a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="menu-toggle" id="menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Order History Section -->
    <section class="order-history-section">
        <div class="container">
            <div class="order-history-header">
                <h1><i class="fas fa-history"></i> Order History</h1>
                <p>View and track all your past orders</p>
            </div>
            
            <div class="order-history-controls">
                <div class="search-box">
                    <input type="text" id="search-orders" placeholder="Search orders...">
                    <button id="search-btn"><i class="fas fa-search"></i></button>
                </div>
                <select id="status-filter" class="filter-select">
                    <option value="">All Status</option>
                    <option value="pending">Pending</option>
                    <option value="confirmed">Confirmed</option>
                    <option value="preparing">Preparing</option>
                    <option value="out_for_delivery">Out for Delivery</option>
                    <option value="delivered">Delivered</option>
                    <option value="cancelled">Cancelled</option>
                </select>
                <select id="time-filter" class="filter-select">
                    <option value="all">All Time</option>
                    <option value="week">This Week</option>
                    <option value="month">This Month</option>
                    <option value="3months">Last 3 Months</option>
                    <option value="year">This Year</option>
                </select>
                <button id="refresh-orders" class="btn btn-outline">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
            
            <div class="order-history-stats">
                <div class="stat-card">
                    <div class="stat-icon" style="background-color: #3498db;">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                     <h3 id="total-orders">0</h3>
                        <p>Total Orders</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background-color: #2ecc71;">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="delivered-orders">0</h3>
                        <p>Delivered</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background-color: #f39c12;">
                        <i class="fas fa-truck"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="active-orders">0</h3>
                        <p>Active</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background-color: #9b59b6;">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="total-spent">$0</h3>
                        <p>Total Spent</p>
                    </div>
                </div>
            </div>
            
            <div class="order-history-container">
                <div class="table-responsive">
                    <table class="orders-table" id="orders-table">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Date</th>
                                <th>Items</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="orders-tbody">
                            <!-- Orders will be loaded here -->
                            <tr id="loading-row">
                                <td colspan="6" class="loading-cell">
                                    <i class="fas fa-spinner fa-spin"></i> Loading orders...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="no-orders" id="no-orders" style="display: none;">
                    <div class="no-orders-content">
                        <i class="fas fa-shopping-bag"></i>
                        <h3>No orders yet</h3>
                        <p>You haven't placed any orders. Start exploring our menu!</p>
                        <a href="menu.html" class="btn btn-primary">
                            <i class="fas fa-utensils"></i> Order Now
                        </a>
                    </div>
                </div>
                
                <div class="pagination" id="pagination" style="display: none;">
                    <button id="prev-page" class="btn btn-outline" disabled>
                        <i class="fas fa-chevron-left"></i> Previous
                    </button>
                    <span id="page-info">Page 1 of 1</span>
                    <button id="next-page" class="btn btn-outline" disabled>
                        Next <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Order Details Modal -->
    <div class="modal" id="order-details-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Order Details</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body" id="order-details-body">
                <!-- Order details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
         <div class="footer-content">
                <div class="footer-section">
                    <h3>FoodExpress</h3>
                    <p>Delivering happiness since 2024</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <a href="../index.php">Home</a>
                    <a href="menu.html">Menu</a>
                    <a href="#">About Us</a>
                    <a href="#">Contact</a>
                </div>
                <div class="footer-section">
                    <h4>Contact Us</h4>
                    <p><i class="fas fa-phone"></i> +1 (555) 123-4567</p>
                    <p><i class="fas fa-envelope"></i> support@foodexpress.com</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 FoodExpress. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../assets/js/main.js"></script>
    <script>
        let currentPage = 1;
        let totalPages = 1;
        let currentStatus = '';
        let currentTimeFilter = 'all';
        let currentSearch = '';
        
        document.addEventListener('DOMContentLoaded', function() {
            // Check login status
            if (!checkLoginStatus(true)) {
                window.location.href = 'login.html';
                return;
            }
            
            // Initialize mobile menu
            const menuToggle = document.getElementById('menu-toggle');
            const navLinks = document.querySelector('.nav-links');
            
            if (menuToggle && navLinks) {
                menuToggle.addEventListener('click', function() {
                    navLinks.classList.toggle('active');
                });
            }
            
            // Load orders
            loadOrders();
            loadOrderStats();
            
            // Event listeners
            document.getElementById('status-filter').addEventListener('change', function(e) {
                currentStatus = e.target.value;
                currentPage = 1;
                loadOrders();
            });
            
            document.getElementById('time-filter').addEventListener('change', function(e) {
                currentTimeFilter = e.target.value;
                currentPage = 1;
                loadOrders();
            });
            
            document.getElementById('search-orders').addEventListener('input', function(e) {
                currentSearch = e.target.value;
                currentPage = 1;
                loadOrders();
            });
            
            document.getElementById('refresh-orders').addEventListener('click', function() {
                loadOrders();
                loadOrderStats();
            });
            
            document.getElementById('prev-page').addEventListener('click', function() {
                if (currentPage > 1) {
                    currentPage--;
                    loadOrders();
                }
            });
            
            document.getElementById('next-page').addEventListener('click', function() {
                if (currentPage < totalPages) {
                    currentPage++;
                    loadOrders();
                }
            });
            
            // Modal close button
            document.querySelector('.close-modal').addEventListener('click', function() {
                document.getElementById('order-details-modal').style.display = 'none';
                      });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(event) {
                const modal = document.getElementById('order-details-modal');
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });
        
        function loadOrders() {
            const tbody = document.getElementById('orders-tbody');
            const loadingRow = document.getElementById('loading-row');
            
            // Show loading
            loadingRow.style.display = '';
            document.getElementById('no-orders').style.display = 'none';
            
            // Build query parameters
            let url = `../backend/api/orders.php?page=${currentPage}&limit=10`;
            if (currentStatus) url += `&status=${currentStatus}`;
            if (currentTimeFilter !== 'all') url += `&time=${currentTimeFilter}`;
            if (currentSearch) url += `&search=${encodeURIComponent(currentSearch)}`;
            
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        const orders = data.data.orders || [];
                        const pagination = data.data.pagination || {};
                        
                        // Update pagination
                        currentPage = pagination.current_page || 1;
                        totalPages = pagination.total_pages || 1;
                        updatePagination();
                        
                        if (orders.length > 0) {
                            renderOrders(orders);
                            document.getElementById('pagination').style.display = 'flex';
                        } else {
                            showNoOrders();
                        }
                    } else {
                        showNoOrders();
                    }
                    loadingRow.style.display = 'none';
                })
                .catch(error => {
                    console.error('Error loading orders:', error);
                    showNoOrders();
                    loadingRow.style.display = 'none';
                });
        }
        
        function loadOrderStats() {
            fetch('../backend/api/orders.php?action=stats')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        document.getElementById('total-orders').textContent = data.data.total_orders || 0;
                        document.getElementById('delivered-orders').textContent = data.data.delivered_orders || 0;
                        document.getElementById('active-orders').textContent = data.data.active_orders || 0;
                        document.getElementById('total-spent').textContent = '$' + (parseFloat(data.data.total_spent) || 0).toFixed(2);
                    }
                })
                .catch(error => console.error('Error loading stats:', error));
        }
        
        function renderOrders(orders) {
            const tbody = document.getElementById('orders-tbody');
            
            tbody.innerHTML = orders.map(order => {
                const statusClass = getStatusClass(order.status);
                const statusText = getStatusText(order.status);
                const orderDate = new Date(order.order_date).toLocaleDateString();
                const orderTime = new Date(order.order_date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                return `
                    <tr>
                        <td>
                            <strong>#${order.order_id.toString().padStart(6, '0')}</strong>
                        </td>
                        <td>
                            <div>${orderDate}</div>
                            <small>${orderTime}</small>
                        </td>
                        <td>
                            <div class="order-items-count">
                                <i class="fas fa-utensils"></i>
                                ${order.item_count || 1} item${order.item_count !== 1 ? 's' : ''}
                            </div>
                        </td>
                        <td>
                            <strong>$${parseFloat(order.total_amount).toFixed(2)}</strong>
                        </td>
                        <td>
                            <span class="status-badge ${statusClass}">${statusText}</span>
                        </td>
                        <td>
                            <div class="order-actions">
                                <button class="btn btn-sm btn-outline" onclick="viewOrderDetails(${order.order_id})">
                                    <i class="fas fa-eye"></i> View
                                </button>
                                ${order.status === 'pending' || order.status === 'confirmed' ? `
                                <button class="btn btn-sm btn-danger" onclick="cancelOrder(${order.order_id})">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                                ` : ''}
                                ${order.status === 'delivered' ? `
                                <button class="btn btn-sm btn-primary" onclick="reorder(${order.order_id})">
                                    <i class="fas fa-redo"></i> Reorder
                                </button>
                                ` : ''}
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }
        
        function showNoOrders() {
            document.getElementById('orders-tbody').innerHTML = '';
            document.getElementById('no-orders').style.display = 'flex';
            document.getElementById('pagination').style.display = 'none';
        }
        
        function updatePagination() {
            const prevBtn = document.getElementById('prev-page');
            const nextBtn = document.getElementById('next-page');
            const pageInfo = document.getElementById('page-info');
            
            prevBtn.disabled = currentPage <= 1;
            nextBtn.disabled = currentPage >= totalPages;
            pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
        }
        
        function getStatusClass(status) {
            const classes = {
                'pending': 'status-pending',
                'confirmed': 'status-confirmed',
                'preparing': 'status-preparing',
                'out_for_delivery': 'status-out',
                'delivered': 'status-delivered',
                'cancelled': 'status-cancelled'
            };
            return classes[status] || 'status-pending';
        }
        
        function getStatusText(status) {
            const texts = {
                'pending': 'Pending',
                'confirmed': 'Confirmed',
                'preparing': 'Preparing',
                'out_for_delivery': 'Out for Delivery',
                'delivered': 'Delivered',
                'cancelled': 'Cancelled'
            };
            return texts[status] || 'Pending';
        }
        
        function viewOrderDetails(orderId) {
            fetch(`../backend/api/orders.php?order_id=${orderId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        showOrderDetailsModal(data.data);
                    } else {
                        showNotification(data.message || 'Failed to load order details', 'error');
                    }
                })
                .catch(error => {
                    console.error('Error loading order details:', error);
                    showNotification('Failed to load order details', 'error');
                });
        }
        
        function showOrderDetailsModal(order) {
            const modal = document.getElementById('order-details-modal');
            const modalBody = document.getElementById('order-details-body');
            
            const statusClass = getStatusClass(order.status);
            const statusText = getStatusText(order.status);
            const orderDate = new Date(order.order_date).toLocaleString();
            
            // Format delivery address
            const deliveryAddress = order.delivery_address || 'No address provided';
            
            // Format payment method
            const paymentMethod = order.payment_method === 'cash_on_delivery' 
                ? 'Cash on Delivery' 
                : 'Online Payment';
            
            const paymentStatus = order.payment_status === 'paid' ? 'Paid' : 'Pending';
            
            // Build order items HTML
            let itemsHtml = '';
            if (order.items && order.items.length > 0) {
                itemsHtml = order.items.map(item => `
                    <div class="order-item-detail">
                        <div class="item-image">
                            <img src="${item.image_url || '../assets/images/default-food.jpg'}" 
                                 alt="${item.food_name}"
                                 onerror="this.src='../assets/images/default-food.jpg'">
                        </div>
                        <div class="item-info">
                            <h4>${item.food_name}</h4>
                            <p class="item-price">$${parseFloat(item.price).toFixed(2)} Ã— ${item.quantity}</p>
                        </div>
                        <div class="item-subtotal">
                            <strong>$${(item.price * item.quantity).toFixed(2)}</strong>
                        </div>
                    </div>
                `).join('');
            }
            
            modalBody.innerHTML = `
                <div class="order-details-content">
                    <div class="order-header">
                        <div class="order-id">
                            <strong>Order #${order.order_id.toString().padStart(6, '0')}</strong>
                            <span class="status-badge ${statusClass}">${statusText}</span>
                        </div>
                        <div class="order-date">${orderDate}</div>
                    </div>
                    
                    <div class="order-info-grid">
                        <div class="info-card">
                            <h4><i class="fas fa-map-marker-alt"></i> Delivery Address</h4>
                            <p>${deliveryAddress}</p>
                        </div>
                        <div class="info-card">
                            <h4><i class="fas fa-phone"></i> Contact</h4>
                            <p>${order.contact_number || 'Not provided'}</p>
                        </div>
                        <div class="info-card">
                            <h4><i class="fas fa-credit-card"></i> Payment</h4>
                            <p>${paymentMethod} (${paymentStatus})</p>
                        </div>
                        <div class="info-card">
                            <h4><i class="fas fa-sticky-note"></i> Instructions</h4>
                            <p>${order.special_instructions || 'No special instructions'}</p>
                        </div>
                    </div>
                    
                    <div class="order-items-section">
                        <h4><i class="fas fa-utensils"></i> Order Items</h4>
                        <div class="order-items-list">
                            ${itemsHtml}
                        </div>
                    </div>
                    
                    <div class="order-total-section">
                        <div class="total-row">
                            <span>Subtotal</span>
                            <span>$${parseFloat(order.total_amount).toFixed(2)}</span>
                        </div>
                        <div class="total-row">
                            <span>Delivery Fee</span>
                            <span>$2.99</span>
                        </div>
                        <div class="total-row">
                            <span>Tax (8%)</span>
                            <span>$${(order.total_amount * 0.08).toFixed(2)}</span>
                        </div>
                        <div class="total-row grand-total">
                            <span>Total Amount</span>
                            <span>$${(parseFloat(order.total_amount) + 2.99 + (order.total_amount * 0.08)).toFixed(2)}</span>
                        </div>
                    </div>
                    
                    <div class="order-actions-section">
                        ${order.status === 'pending' || order.status === 'confirmed' ? `
                        <button class="btn btn-danger" onclick="cancelOrder(${order.order_id}, true)">
                            <i class="fas fa-times"></i> Cancel Order
                        </button>
                        ` : ''}
                        ${order.status === 'delivered' ? `
                        <button class="btn btn-primary" onclick="reorder(${order.order_id})">
                            <i class="fas fa-redo"></i> Reorder
                        </button>
                        ` : ''}
                        <button class="btn btn-outline" onclick="printOrder(${order.order_id})">
                            <i class="fas fa-print"></i> Print Receipt
                        </button>
                    </div>
                </div>
            `;
            
            modal.style.display = 'block';
        }
        
        function cancelOrder(orderId, fromModal = false) {
            if (confirm('Are you sure you want to cancel this order?')) {
                fetch(`../backend/api/orders.php?action=cancel&order_id=${orderId}`, {
                    method: 'POST'
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        showNotification('Order cancelled successfully', 'success');
                        if (fromModal) {
                            document.getElementById('order-details-modal').style.display = 'none';
                        }
                        loadOrders();
                        loadOrderStats();
                    } else {
                        showNotification(data.message || 'Failed to cancel order', 'error');
                    }
                })
                .catch(error => {
                    console.error('Error cancelling order:', error);
                    showNotification('Failed to cancel order', 'error');
                });
            }
        }
        
        function reorder(orderId) {
            fetch(`../backend/api/orders.php?action=reorder&order_id=${orderId}`, {
                method: 'POST'
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification('Items added to cart!', 'success');
                    updateCartCount();
                    setTimeout(() => {
                        window.location.href = 'cart.html';
                    }, 1500);
                } else {
                    showNotification(data.message || 'Failed to reorder', 'error');
                }
            })
            .catch(error => {
                console.error('Error reordering:', error);
                showNotification('Failed to reorder', 'error');
            });
        }
        
        function printOrder(orderId) {
            // In a real implementation, this would open a print-friendly page
            showNotification('Print functionality would open here', 'info');
        }
        
        // Add styles for order history page
        const style = document.createElement('style');
        style.textContent = `
            .order-history-section {
                padding: 40px 0 80px;
                min-height: calc(100vh - 200px);
                background: #f8f9fa;
            }
            
            .order-history-header {
                text-align: center;
                margin-bottom: 40px;
            }
            
            .order-history-header h1 {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 15px;
                margin-bottom: 10px;
                color: #333;
            }
            
            .order-history-header p {
                color: #666;
                font-size: 1.1rem;
            }
            
            .order-history-controls {
                display: flex;
                gap: 15px;
                margin-bottom: 30px;
                flex-wrap: wrap;
            }
            
            .search-box {
                flex: 1;
                min-width: 300px;
                display: flex;
            }
            
            .search-box input {
                flex: 1;
                padding: 12px 20px;
                border: 2px solid #ddd;
                border-right: none;
                border-radius: 5px 0 0 5px;
                font-size: 1rem;
            }
            
            .search-box button {
                padding: 0 20px;
                background-color: #ff6b6b;
                color: white;
                border: none;
                border-radius: 0 5px 5px 0;
                cursor: pointer;
            }
            
            .filter-select {
                padding: 12px 20px;
                border: 2px solid #ddd;
                border-radius: 5px;
                background-color: white;
                font-size: 1rem;
                min-width: 150px;
            }
            
            .order-history-stats {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin-bottom: 30px;
            }
            
            .stat-card {
                background: white;
                border-radius: 10px;
                padding: 20px;
                display: flex;
                align-items: center;
                gap: 20px;
                box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            }
            
            .stat-icon {
                width: 60px;
                height: 60px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
            }
            
            .stat-icon i {
                font-size: 1.5rem;
            }
              .stat-info h3 {
                margin: 0 0 5px 0;
                font-size: 1.8rem;
                color: #333;
            }
            
            .stat-info p {
                margin: 0;
                color: #666;
                font-size: 0.9rem;
            }
            
            .order-history-container {
                background: white;
                border-radius: 10px;
                padding: 30px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            }
            
            .table-responsive {
                overflow-x: auto;
            }
            
            .orders-table {
                width: 100%;
                border-collapse: collapse;
            }
            
            .orders-table thead {
                background: #f8f9fa;
            }
            
            .orders-table th {
                padding: 15px;
                text-align: left;
                font-weight: 600;
                color: #333;
                border-bottom: 2px solid #e0e0e0;
            }
            
            .orders-table td {
                padding: 15px;
                border-bottom: 1px solid #f0f0f0;
                vertical-align: middle;
            }
            
            .orders-table tbody tr:hover {
                background: #f8f9fa;
            }
            
            .loading-cell {
                text-align: center;
                padding: 40px !important;
                color: #666;
            }
            
            .loading-cell i {
                margin-right: 10px;
            }
            
            .order-items-count {
                display: flex;
                align-items: center;
                gap: 8px;
                color: #666;
            }
            
            .status-badge {
                display: inline-block;
                padding: 5px 12px;
                border-radius: 20px;
                font-size: 0.8rem;
                font-weight: 500;
                text-transform: capitalize;
            }
            
            .status-pending {
                background: #fff3cd;
                color: #856404;
                border: 1px solid #ffeaa7;
            }
            
            .status-confirmed {
                background: #d1ecf1;
                color: #0c5460;
                border: 1px solid #bee5eb;
            }
            
            .status-preparing {
                background: #cce5ff;
                color: #004085;
                border: 1px solid #b8daff;
            }
            
            .status-out {
                background: #d4edda;
                color: #155724;
                border: 1px solid #c3e6cb;
            }
            
            .status-delivered {
                background: #d1f7c4;
                color: #0a5c36;
                border: 1px solid #c3e6cb;
            }
            
            .status-cancelled {
                background: #f8d7da;
                color: #721c24;
                border: 1px solid #f5c6cb;
            }
            
            .order-actions {
                display: flex;
                gap: 8px;
            }
            
            .btn-sm {
                padding: 6px 12px;
                font-size: 0.85rem;
            }
            
            .btn-danger {
                background-color: #e74c3c;
                color: white;
                border: none;
            }
            
            .btn-danger:hover {
                background-color: #c0392b;
            }
            
            .no-orders {
                display: none;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                padding: 60px 20px;
                text-align: center;
            }
            
            .no-orders-content i {
                font-size: 4rem;
                color: #ddd;
                margin-bottom: 20px;
            }
            
            .no-orders-content h3 {
                margin: 0 0 10px 0;  
                color: #666;
            }
            
            .no-orders-content p {
                margin: 0 0 20px 0;
                color: #999;
            }
            
            .pagination {
                display: none;
                justify-content: center;
                align-items: center;
                gap: 20px;
                margin-top: 30px;
                padding-top: 20px;
                border-top: 1px solid #e0e0e0;
            }
            
            #page-info {
                color: #666;
                font-weight: 500;
            }
            
            /* Order Details Modal */
            .modal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                z-index: 1000;
                overflow-y: auto;
                padding: 20px;
            }
            
            .modal-content {
                background: white;
                border-radius: 15px;
                max-width: 800px;
                width: 100%;
                margin: 0 auto;
                animation: modalSlideIn 0.3s ease;
                max-height: 90vh;
                overflow-y: auto;
            }
            
            .modal-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 20px 30px;
                border-bottom: 2px solid #f8f9fa;
            }
            
            .modal-header h3 {
                margin: 0;
                color: #333;
            }
            
            .close-modal {
                font-size: 1.8rem;
                cursor: pointer;
                color: #666;
                background: none;
                border: none;
                padding: 0;
                line-height: 1;
            }
            
            .close-modal:hover {
                color: #333;
            }
            
            .modal-body {
                padding: 30px;
            }
            
            .order-details-content {
                display: flex;
                flex-direction: column;
                gap: 30px;
            }
            
            .order-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding-bottom: 20px;
                border-bottom: 2px solid #f8f9fa;
            }
            
            .order-id {
                display: flex;
                align-items: center;
                gap: 15px;
            }
            
            .order-id strong {
                font-size: 1.2rem;
                color: #333;
            }
            
            .order-date {
                color: #666;
                font-size: 0.9rem;
            }
            
            .order-info-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
            }
            
            .info-card {
                background: #f8f9fa;
                padding: 20px;
                border-radius: 8px;
            }
            
            .info-card h4 {
                display: flex;
                align-items: center;
                gap: 10px;
                margin: 0 0 10px 0;
                color: #333;
                font-size: 1rem;
            }
            
            .info-card p {
                margin: 0;
                color: #666;
                line-height: 1.5;
            }
            
            .order-items-section h4 {
                display: flex;
                align-items: center;
                gap: 10px;
                margin: 0 0 20px 0;
                color: #333;
                font-size: 1.2rem;
            }
            
            .order-items-list {
                display: flex;
                flex-direction: column;
                gap: 15px;
                }
            
            .order-item-detail {
                display: grid;
                grid-template-columns: 60px 1fr auto;
                gap: 20px;
                padding: 15px;
                background: #f8f9fa;
                border-radius: 8px;
                align-items: center;
            }
            
            .item-image {
                width: 60px;
                height: 60px;
                border-radius: 8px;
                overflow: hidden;
            }
            
            .item-image img {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }
            
            .item-info h4 {
                margin: 0 0 5px 0;
                font-size: 1rem;
                color: #333;
            }
            
            .item-price {
                margin: 0;
                color: #666;
                font-size: 0.9rem;
            }
            
            .item-subtotal {
                font-weight: 600;
                color: #333;
            }
            
            .order-total-section {
                background: #f8f9fa;
                padding: 20px;
                border-radius: 8px;
            }
            
            .total-row {
                display: flex;
                justify-content: space-between;
                margin-bottom: 10px;
                color: #666;
            }
            
            .total-row.grand-total {
                font-weight: 700;
                font-size: 1.2rem;
                color: #333;
                margin-top: 15px;
                padding-top: 15px;
                border-top: 2px solid #e0e0e0;
            }
            
            .order-actions-section {
                display: flex;
                gap: 15px;
                justify-content: flex-end;
                padding-top: 20px;
                border-top: 2px solid #f8f9fa;
            }
            
            @keyframes modalSlideIn {
                from {
                    opacity: 0;
                    transform: translateY(-50px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            @media (max-width: 768px) {
                .order-history-controls {
                    flex-direction: column;
                }
                
                .search-box,
                .filter-select {
                    min-width: 100%;
                }
                
                .orders-table {
                    font-size: 0.9rem;
                }
                
                .orders-table th,
                .orders-table td {
                    padding: 10px;
                }
                
                .order-actions {
                    flex-direction: column;
                }
                
                .order-info-grid {
                    grid-template-columns: 1fr;
                }
                
                .order-actions-section {
                    flex-direction: column;
                }
                
                .order-actions-section .btn {
                    width: 100%;
                }
            }
            
            @media (max-width: 480px) {
                .stat-card {
                    flex-direction: column;
                    text-align: center;
                    gap: 15px;
                }
                
                .order-item-detail {
                    grid-template-columns: 1fr;
                    text-align: center;
                }
                
                .item-image {
                    margin: 0 auto;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
